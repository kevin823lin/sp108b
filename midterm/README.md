# 期中專案：寫一個可以支援 for +goto + if 語法的編譯器

## 語法重點
1. for 語法
    - 設定初始值
    - 邏輯判斷
    - 重複處理
2. goto 語法
    - 判斷標籤並跳躍
3. if 語法
    - 邏輯判斷

## 修改檔案
1. .\compiler.c
1. .\compiler.h

## 測試方法
1. 於專案目錄執行make以透過Makefile寫好的參數編譯compiler
2. 執行.\compiler .\test\for.c -ir -run
2. 執行.\compiler .\test\goto.c -ir -run
## 測試範例 .\test\for.c (for 語法)
```
for(i = 1 ; i < 20 ; i = i + 3)
{
    i = i + 2;
}
i = 0;
```

## 執行結果 .\test\for.c (for 語法)
```
PS D:\檔案\課程\1082\系統程式\sp108b\midterm> .\compiler .\test\for.c -ir -run
=======irDump()==========
00: t1 = 1
01: i = t1
02: (L1)
03: t2 = i
04: t3 = 20
05: t4 = t2 < t3
06: ifnot t4 goto L2     
07: t1 = i
08: t2 = 3
09: t3 = t1 + t2
10: i = t3
11: t1 = i
12: t2 = 2
13: t3 = t1 + t2
14: i = t3
15: goto L1
16: (L2)
17: t1 = 0
18: i = t1
===================irRun()=======================
00: t1 = 1 (1)
01: i = t1 (1)
02: (L1) (2)
03: t2 = i (1)
04: t3 = 20 (20)
05: t4 = t2 < t3 (1)
06: ifnot t4 (1)  -- fail
07: t1 = i (1)
08: t2 = 3 (3)
09: t3 = t1 + t2 (4)
10: i = t3 (4)
11: t1 = i (4)
12: t2 = 2 (2)
13: t3 = t1 + t2 (6)
14: i = t3 (6)
15: goto L1 (2)
02: (L1) (2)
03: t2 = i (6)
04: t3 = 20 (20)
05: t4 = t2 < t3 (1)
06: ifnot t4 (1)  -- fail
07: t1 = i (6)
08: t2 = 3 (3)
09: t3 = t1 + t2 (9)
10: i = t3 (9)
11: t1 = i (9)
12: t2 = 2 (2)
13: t3 = t1 + t2 (11)
14: i = t3 (11)
15: goto L1 (2)
02: (L1) (2)
03: t2 = i (11)
04: t3 = 20 (20)
05: t4 = t2 < t3 (1)
06: ifnot t4 (1)  -- fail
07: t1 = i (11)
08: t2 = 3 (3)
09: t3 = t1 + t2 (14)
10: i = t3 (14)
11: t1 = i (14)
12: t2 = 2 (2)
13: t3 = t1 + t2 (16)
14: i = t3 (16)
15: goto L1 (2)
02: (L1) (2)
03: t2 = i (16)
04: t3 = 20 (20)
05: t4 = t2 < t3 (1)
06: ifnot t4 (1)  -- fail
07: t1 = i (16)
08: t2 = 3 (3)
09: t3 = t1 + t2 (19)
10: i = t3 (19)
11: t1 = i (19)
12: t2 = 2 (2)
13: t3 = t1 + t2 (21)
14: i = t3 (21)
15: goto L1 (2)
02: (L1) (2)
03: t2 = i (21)
04: t3 = 20 (20)
05: t4 = t2 < t3 (0)
06: ifnot t4 (0) goto L2 (16)
16: (L2) (16)
17: t1 = 0 (0)
18: i = t1 (0)
```
## 測試範例 .\test\goto.c (goto、if 語法)
```
a = 2;

A:
a = a + 3;

if(a<10)
    goto A;
else
    goto B;

a = 0;

B:
a = a + 6;
```

## 執行結果 .\test\goto.c (goto、if 語法)
```
PS D:\檔案\課程\1082\系統程式\sp108b\midterm> .\compiler .\test\goto.c -ir -run
=======irDump()==========
00: t1 = 2
01: a = t1
02: (L1)
03: t1 = a
04: t2 = 3
05: t3 = t1 + t2
06: a = t3
07: t4 = a
08: t5 = 10
09: t6 = t4 < t5
10: ifnot t6 goto L2
11: goto L1
12: goto L3
13: (L2)
14: goto L4
15: (L3)
16: t1 = 0
17: a = t1
18: (L4)
19: t1 = a
20: t2 = 6
21: t3 = t1 + t2
22: a = t3
===================irRun()=======================
00: t1 = 2 (2)
01: a = t1 (2)
02: (L1) (2)
03: t1 = a (2)
04: t2 = 3 (3)
05: t3 = t1 + t2 (5)
06: a = t3 (5)
07: t4 = a (5)
08: t5 = 10 (10)
09: t6 = t4 < t5 (1)
10: ifnot t6 (1)  -- fail
11: goto L1 (2)
02: (L1) (2)
03: t1 = a (5)
04: t2 = 3 (3)
05: t3 = t1 + t2 (8)
06: a = t3 (8)
07: t4 = a (8)
08: t5 = 10 (10)
09: t6 = t4 < t5 (1)
10: ifnot t6 (1)  -- fail
11: goto L1 (2)
02: (L1) (2)
03: t1 = a (8)
04: t2 = 3 (3)
05: t3 = t1 + t2 (11)
06: a = t3 (11)
07: t4 = a (11)
08: t5 = 10 (10)
09: t6 = t4 < t5 (0)
10: ifnot t6 (0) goto L2 (13)
13: (L2) (13)
14: goto L4 (18)
18: (L4) (18)
19: t1 = a (11)
20: t2 = 6 (6)
21: t3 = t1 + t2 (17)
22: a = t3 (17)
```